"use strict";
const vm = require("vm");
/**
 * 解析jsonp
 * @param jsonp jsonp数据
 * @param callback jsonp指定的回调函数名称
 */
function parse(jsonp, callback) {
    const ctx = {
        result: null,
        [callback]: function (data) {
            ctx.result = data;
        }
    };
    vm.runInNewContext(jsonp, ctx);
    return ctx.result;
}
/**
 * 将数据序列化成jsonp格式
 * @param data 要序列化的数据
 * @param callback 回调函数的名称，默认为随机数
 */
function stringify(data, callback = `_${(Math.random() * 10000000000).toFixed(0)}`) {
    return `${callback}(${JSON.stringify(data)})`;
}
module.exports = { parse, stringify };

//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7QUFBQSx5QkFBeUI7QUFFekI7Ozs7R0FJRztBQUNILGVBQWUsS0FBYSxFQUFFLFFBQWdCO0lBQzFDLE1BQU0sR0FBRyxHQUFHO1FBQ1IsTUFBTSxFQUFFLElBQVc7UUFDbkIsQ0FBQyxRQUFRLENBQUMsRUFBRSxVQUFVLElBQVM7WUFDM0IsR0FBRyxDQUFDLE1BQU0sR0FBRyxJQUFJLENBQUM7UUFDdEIsQ0FBQztLQUNKLENBQUM7SUFFRixFQUFFLENBQUMsZUFBZSxDQUFDLEtBQUssRUFBRSxHQUFHLENBQUMsQ0FBQztJQUUvQixNQUFNLENBQUMsR0FBRyxDQUFDLE1BQU0sQ0FBQztBQUN0QixDQUFDO0FBRUQ7Ozs7R0FJRztBQUNILG1CQUFtQixJQUFTLEVBQUUsV0FBbUIsSUFBSSxDQUFDLElBQUksQ0FBQyxNQUFNLEVBQUUsR0FBRyxXQUFXLENBQUMsQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLEVBQUU7SUFDM0YsTUFBTSxDQUFDLEdBQUcsUUFBUSxJQUFJLElBQUksQ0FBQyxTQUFTLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQztBQUNsRCxDQUFDO0FBRUQsaUJBQVMsRUFBRSxLQUFLLEVBQUUsU0FBUyxFQUFFLENBQUMiLCJmaWxlIjoiaW5kZXguanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgKiBhcyB2bSBmcm9tICd2bSc7XHJcblxyXG4vKipcclxuICog6Kej5p6QanNvbnBcclxuICogQHBhcmFtIGpzb25wIGpzb25w5pWw5o2uXHJcbiAqIEBwYXJhbSBjYWxsYmFjayBqc29ucOaMh+WumueahOWbnuiwg+WHveaVsOWQjeensFxyXG4gKi9cclxuZnVuY3Rpb24gcGFyc2UoanNvbnA6IHN0cmluZywgY2FsbGJhY2s6IHN0cmluZykge1xyXG4gICAgY29uc3QgY3R4ID0ge1xyXG4gICAgICAgIHJlc3VsdDogbnVsbCBhcyBhbnksXHJcbiAgICAgICAgW2NhbGxiYWNrXTogZnVuY3Rpb24gKGRhdGE6IGFueSkge1xyXG4gICAgICAgICAgICBjdHgucmVzdWx0ID0gZGF0YTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIHZtLnJ1bkluTmV3Q29udGV4dChqc29ucCwgY3R4KTtcclxuXHJcbiAgICByZXR1cm4gY3R4LnJlc3VsdDtcclxufVxyXG5cclxuLyoqXHJcbiAqIOWwhuaVsOaNruW6j+WIl+WMluaIkGpzb25w5qC85byPXHJcbiAqIEBwYXJhbSBkYXRhIOimgeW6j+WIl+WMlueahOaVsOaNrlxyXG4gKiBAcGFyYW0gY2FsbGJhY2sg5Zue6LCD5Ye95pWw55qE5ZCN56ew77yM6buY6K6k5Li66ZqP5py65pWwXHJcbiAqL1xyXG5mdW5jdGlvbiBzdHJpbmdpZnkoZGF0YTogYW55LCBjYWxsYmFjazogc3RyaW5nID0gYF8keyhNYXRoLnJhbmRvbSgpICogMTAwMDAwMDAwMDApLnRvRml4ZWQoMCl9YCkge1xyXG4gICAgcmV0dXJuIGAke2NhbGxiYWNrfSgke0pTT04uc3RyaW5naWZ5KGRhdGEpfSlgO1xyXG59XHJcblxyXG5leHBvcnQgPSB7IHBhcnNlLCBzdHJpbmdpZnkgfTsiXX0=
